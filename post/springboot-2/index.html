<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>é£è¢–</title>
<meta name="description" content="çƒŸè›¾æ•›ç•¥ä¸èƒœæ€ï¼Œé£è¢–ä½æ˜‚å¦‚æœ‰æƒ…" />
<link rel="shortcut icon" href="https://Zu3zz.github.io//favicon.ico?v=1581859385259">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://Zu3zz.github.io//styles/main.css">
<link rel="alternate" type="application/atom+xml" title="é£è¢– - Atom Feed" href="https://Zu3zz.github.io//atom.xml">



  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="remixicon-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://Zu3zz.github.io/">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://Zu3zz.github.io//images/avatar.png?v=1581859385259" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">é£è¢–</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            æ–‡ç« ç›®å½•
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">1ã€é…ç½®æ–‡ä»¶</a></li>
<li><a href="#2-yaml%E8%AF%AD%E6%B3%95">2ã€ YAMLè¯­æ³•</a>
<ul>
<li><a href="#1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">1ã€åŸºæœ¬è¯­æ³•</a></li>
<li><a href="#2-%E5%80%BC%E7%9A%84%E5%86%99%E6%B3%95">2ã€å€¼çš„å†™æ³•</a>
<ul>
<li><a href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E6%99%AE%E9%80%9A%E7%9A%84%E5%80%BC%E6%95%B0%E5%AD%97-%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%B8%83%E5%B0%94%E5%80%BC">å­—é¢é‡ï¼šæ™®é€šçš„å€¼(æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼)</a></li>
<li><a href="#%E5%AF%B9%E8%B1%A1-map%E5%B1%9E%E6%80%A7%E5%92%8C%E5%80%BC%E9%94%AE%E5%80%BC%E5%AF%B9">å¯¹è±¡ã€Map(å±æ€§å’Œå€¼)(é”®å€¼å¯¹)ï¼š</a></li>
<li><a href="#%E6%95%B0%E7%BB%84list-set">æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%80%BC%E6%B3%A8%E5%85%A5">3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥</a><br>
*
<ul>
<li><a href="#1-properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%9C%A8idea%E4%B8%AD%E9%BB%98%E8%AE%A4utf-8%E5%8F%AF%E8%83%BD%E4%BC%9A%E4%B9%B1%E7%A0%81">1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç </a></li>
<li><a href="#2-value%E8%8E%B7%E5%8F%96%E5%80%BC%E5%92%8Cconfigurationproperties%E8%8E%B7%E5%8F%96%E5%80%BC%E6%AF%94%E8%BE%83">2ã€@Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ</a></li>
<li><a href="#3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%E5%80%BC%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C">3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ</a></li>
<li><a href="#4-propertysource-importresource">4ã€@PropertySource &amp; @ImportResource</a></li>
</ul>
</li>
<li><a href="#4-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8D%A0%E4%BD%8D%E7%AC%A6">4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</a>
<ul>
<li><a href="#1-%E9%9A%8F%E6%9C%BA%E6%95%B0">1ã€éšæœºæ•°</a></li>
<li><a href="#2-%E5%8D%A0%E4%BD%8D%E7%AC%A6%E8%8E%B7%E5%8F%96%E4%B9%8B%E5%89%8D%E9%85%8D%E7%BD%AE%E7%9A%84%E5%80%BC%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%8F%AF%E4%BB%A5%E6%98%AF%E7%94%A8%E6%8C%87%E5%AE%9A%E9%BB%98%E8%AE%A4%E5%80%BC">2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨:æŒ‡å®šé»˜è®¤å€¼</a></li>
</ul>
</li>
<li><a href="#5-profile">5ã€Profile</a>
<ul>
<li><a href="#1-%E5%A4%9Aprofile%E6%96%87%E4%BB%B6">1ã€å¤šProfileæ–‡ä»¶</a></li>
<li><a href="#2-yml%E6%94%AF%E6%8C%81%E5%A4%9A%E6%96%87%E6%A1%A3%E5%9D%97%E6%96%B9%E5%BC%8F">2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼</a></li>
<li><a href="#3-%E6%BF%80%E6%B4%BB%E6%8C%87%E5%AE%9Aprofile">3ã€æ¿€æ´»æŒ‡å®šprofile</a></li>
</ul>
</li>
<li><a href="#6-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E4%BD%8D%E7%BD%AE">6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</a></li>
<li><a href="#7-%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F">7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº</a></li>
<li><a href="#8-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">8ã€è‡ªåŠ¨é…ç½®åŸç†</a>
<ul>
<li><a href="#1-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86">1ã€<strong>è‡ªåŠ¨é…ç½®åŸç†</strong></a></li>
<li><a href="#2-%E7%BB%86%E8%8A%82">2ã€ç»†èŠ‚</a>
<ul>
<li><a href="#1-conditional%E6%B4%BE%E7%94%9F%E6%B3%A8%E8%A7%A3spring%E4%B8%AD%E5%8E%9F%E7%94%9F%E7%9A%84conditional%E4%BD%9C%E7%94%A8">1ã€@Conditionalæ´¾ç”Ÿæ³¨è§£(Springä¸­åŸç”Ÿçš„@Conditionalä½œç”¨)</a></li>
<li><a href="#2-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E5%BF%85%E9%A1%BB%E5%9C%A8%E4%B8%80%E5%AE%9A%E7%9A%84%E6%9D%A1%E4%BB%B6%E4%B8%8B%E6%89%8D%E8%83%BD%E7%94%9F%E6%95%88">2ã€è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆ</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="remixicon-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="/" class="menu" style="animation-delay: 0s">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu" style="animation-delay: 0.2s">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu" style="animation-delay: 0.4s">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu" style="animation-delay: 0.6000000000000001s">
          å…³äº
        </a>
      
    
      
        <a href="/projects" class="menu" style="animation-delay: 0.8s">
          é¡¹ç›®
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700">By 3zz.</div>
    <a class="rss" href="https://Zu3zz.github.io//atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">SpringBootç³»åˆ—(2) ---- é…ç½®æ–‡ä»¶</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2019-10-10 / 15 min read
        </div>
        
        <div class="post-content yue">
          <p>ğŸé‚£ä¹ˆåˆåˆ°äº†æˆ‘ä»¬SpringBootç³»åˆ—çš„ç¬¬äºŒç¯‡ï¼ï¼<br>
ğŸ€è¿™ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥è®²è®²SpringBootä¸­çš„é…ç½®ç›¸å…³é—®é¢˜ï¼Œä¾æ—§æœ‰æºç çº§åˆ«çš„åˆ†æå“¦ï¼</p>
<!-- more -->
<h2 id="1-é…ç½®æ–‡ä»¶">1ã€é…ç½®æ–‡ä»¶</h2>
<ul>
<li>
<p>Spring Bootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åæ˜¯å›ºå®šçš„</p>
<ol>
<li>application.properties</li>
<li>application.yml</li>
</ol>
</li>
<li>
<p>é…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é»˜è®¤çš„è®¾ç½®å€¼ï¼›SpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†</p>
</li>
<li>
<p>YAML( YAML Ain't Markup Language)</p>
<ul>
<li>
<p>YAML A Markup Language: æ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€</p>
</li>
<li>
<p>YAML isn't Markup Language: ä¸æ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€</p>
</li>
<li>
<p>æ ‡è®°è¯­è¨€ï¼š</p>
<ul>
<li>
<p>ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼šå¤§å¤šä½¿ç”¨ <strong>xxxx.xml</strong>æ–‡ä»¶ï¼›</p>
</li>
<li>
<p>YAML: <strong>ä»¥æ•°æ®ä¸ºä¸­å¿ƒ</strong>ï¼Œæ¯”JSONã€XMLæ›´é€‚åˆåšé…ç½®æ–‡ä»¶</p>
</li>
<li>
<p>YAMLé…ç½®ä¾‹å­</p>
<pre><code class="language-yml">server:
	port: 8081
</code></pre>
</li>
<li>
<p>XML:</p>
<pre><code class="language-xml">&lt;server&gt;
  &lt;port&gt;8081&lt;/port&gt;
&lt;/server&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-yamlè¯­æ³•">2ã€ YAMLè¯­æ³•</h2>
<h3 id="1-åŸºæœ¬è¯­æ³•">1ã€åŸºæœ¬è¯­æ³•</h3>
<ul>
<li>
<p>k:(ç©ºæ ¼)v : è¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹(ç©ºæ ¼å¿…é¡»æœ‰)ï¼›</p>
</li>
<li>
<p>ä»¥<strong>ç©ºæ ¼</strong>çš„ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼›åªè¦æ˜¯å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯åŒä¸€å±‚çº§çš„</p>
<pre><code class="language-text">server:
	port: 8081
	path: /hello
</code></pre>
</li>
<li>
<p>å±æ€§å’Œå€¼ä¹Ÿæ˜¯å¤§å°å†™æ•æ„Ÿçš„</p>
</li>
</ul>
<h3 id="2-å€¼çš„å†™æ³•">2ã€å€¼çš„å†™æ³•</h3>
<h4 id="å­—é¢é‡æ™®é€šçš„å€¼æ•°å­—-å­—ç¬¦ä¸²-å¸ƒå°”å€¼">å­—é¢é‡ï¼šæ™®é€šçš„å€¼(æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼)</h4>
<ul>
<li>
<p>Kï¼šVï¼šå­—é¢ç›´æ¥æ¥å†™</p>
</li>
<li>
<p>å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–è€…åŒå¼•å·</p>
<ul>
<li>&quot;&quot;:åŒå¼•å·ï¼›ä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼›ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨è¾¾çš„æ„æ€</li>
</ul>
<pre><code class="language-yaml">name: &quot;zhangsan \n lisi&quot;
è¾“å‡ºï¼š zhangsan æ¢è¡Œ lisi
</code></pre>
<ul>
<li>:å•å¼•å·ï¼›ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®</li>
</ul>
<pre><code class="language-yaml">name: 'zhangsan \n lisi'
è¾“å‡ºï¼š zhangsan \n  lisi
</code></pre>
</li>
</ul>
<h4 id="å¯¹è±¡-mapå±æ€§å’Œå€¼é”®å€¼å¯¹">å¯¹è±¡ã€Map(å±æ€§å’Œå€¼)(é”®å€¼å¯¹)ï¼š</h4>
<ul>
<li>
<p>kï¼švï¼šåœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å…³ç³»ï¼›æ³¨æ„ç¼©è¿›</p>
<ul>
<li>å¯¹è±¡è¿˜æ˜¯kï¼švçš„æ–¹å¼</li>
</ul>
<pre><code class="language-yaml">friends:
	lastname: zhangsan
	age: 20
</code></pre>
<ul>
<li>è¡Œå†…å†™æ³•</li>
</ul>
<pre><code class="language-yaml">fridends: {lastName: zhangsan, age: 18}
</code></pre>
</li>
</ul>
<h4 id="æ•°ç»„list-set">æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š</h4>
<ul>
<li>
<p>ç”¨- å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ </p>
<pre><code class="language-yaml">pets:
 - cat
 - dot
 - pig
</code></pre>
</li>
<li>
<p>è¡Œå†…å†™æ³•</p>
<pre><code class="language-yaml">pets: [cat,dog,pig]
</code></pre>
</li>
</ul>
<h2 id="3-é…ç½®æ–‡ä»¶å€¼æ³¨å…¥">3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥</h2>
<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<pre><code class="language-yaml">person:
	lastName: hello
	age: 18
	boss: false
	birth: 2019/10/7
	maps: {k1:v1, k2:v2}
	lists:
	 - lisi
	 - zhaoliu
	dog:
		name: å°ç‹—
		age: 12
</code></pre>
<ul>
<li>JavaBean</li>
</ul>
<pre><code class="language-java">/**
 * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­
 * @ConfigurationPropertiesï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼›
 *      prefix = &quot;person&quot;ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„
 * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ï¼›
 */
@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
public class Person {
    private String lastName;
    private Integer age;
    private Boolean boss;
    private Date birth;
  
    private Map&lt;String,Object&gt; maps;
    private List&lt;Object&gt; lists;
    private Dog dog;
}
</code></pre>
<ul>
<li>æˆ‘ä»¬å¯ä»¥å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åç¼–å†™é…ç½®å°±æœ‰æç¤ºäº†</li>
</ul>
<pre><code class="language-xml">&lt;!--å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤º--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
  &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li>SpringBootä¸­çš„æµ‹è¯•ç±»</li>
</ul>
<pre><code class="language-java">/**
 * SpringBootå•å…ƒæµ‹è¯•
 * å¯ä»¥åœ¨æµ‹è¯•æœŸé—´å¾ˆæ–¹ä¾¿çš„ç±»ä¼¼ç¼–ç ä¸€æ ·è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ç­‰å®¹å™¨çš„åŠŸèƒ½
 */
@RunWith(SpringRunner.class)
@SpringBootTest
public class DemoApplicationTests {}
</code></pre>
<h4 id="1-propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç ">1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç </h4>
<ul>
<li>è°ƒæ•´IDEAä¸­çš„é»˜è®¤ç¼–ç <img src="https://Zu3zz.github.io//post-images/1571315004181.png" alt="è°ƒæ•´IDEA" loading="lazy"></li>
</ul>
<h4 id="2-valueè·å–å€¼å’Œconfigurationpropertiesè·å–å€¼æ¯”è¾ƒ">2ã€@Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ</h4>
<table>
<thead>
<tr>
<th></th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŠŸèƒ½</td>
<td>æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</td>
<td>ä¸€ä¸ªä¸ªæŒ‡å®š</td>
</tr>
<tr>
<td>æ¾æ•£ç»‘å®š(é©¼å³°ä¸ä¸‹åˆ’çº¿è½¬æ¢)</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>SpEL(Springè¡¨è¾¾å¼)</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>JSR303æ•°æ®æ ¡éªŒ(@Validated)</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>å¤æ‚ç±»å‹å°è£…</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
</tbody>
</table>
<ul>
<li>é…ç½®æ–‡ä»¶ymlè¿˜æ˜¯propertiesä»–ä»¬éƒ½èƒ½è·å–åˆ°å€¼ï¼›</li>
<li>å¦‚æœè¯´ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­éœ€è¦è·å–ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„æŸé¡¹å€¼ï¼Œä½¿ç”¨@Valueï¼›</li>
<li>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨@ConfigurationPropertiesï¼›</li>
</ul>
<h4 id="3-é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ">3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ</h4>
<pre><code class="language-java">@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
@Validated
public class Person {
    /**
     * &lt;bean class=&quot;Person&quot;&gt;
     * 	&lt;property name=&quot;lastName&quot; value=&quot;å­—é¢é‡/${key}ä»ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼/#{Springè¡¨è¾¾å¼}&quot;&gt;
     	&lt;/property&gt;
     * &lt;bean/&gt;
     */
   	// lastNameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼
    @Email
    // @Value(&quot;${person.last-name}&quot;)
    private String lastName;
    // @Value(&quot;#{11*2}&quot;)
    private Integer age;
    // @Value(&quot;true&quot;)
    private Boolean boss;
    private Date birth;
    private Map&lt;String,Object&gt; maps;
    private List&lt;Object&gt; lists;
    private Dog dog;
}
</code></pre>
<h4 id="4-propertysource-importresource">4ã€@PropertySource &amp; @ImportResource</h4>
<ul>
<li><strong>@PropertySource:</strong> ï¼š åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</li>
</ul>
<pre><code class="language-java">/**
 * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­
 * @ConfigurationPropertiesï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼›
 *      prefix = &quot;person&quot;ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„
 * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ï¼›
 *  @ConfigurationProperties(prefix = &quot;person&quot;)é»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼ï¼›
 */
@PropertySource(value = {&quot;classpath:person.properties&quot;})
@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
//@Validated
public class Person {
   	//lastNameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼
   	// @Email
    //@Value(&quot;${person.last-name}&quot;)
    private String lastName;
    //@Value(&quot;#{11*2}&quot;)
    private Integer age;
    //@Value(&quot;true&quot;)
    private Boolean boss;
}
</code></pre>
<ul>
<li>
<p><strong>@ImportResource</strong>: å¯¼å…¥Sprinigçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ç”Ÿæ•ˆ</p>
</li>
<li>
<p>Spring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼›</p>
</li>
<li>
<p>æƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼Œ@<strong>ImportResource</strong>æ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š</p>
<pre><code class="language-java">@ImportResource(locations = {&quot;classpath:beans.xml&quot;})
å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶è®©å…¶ç”Ÿæ•ˆ
</code></pre>
</li>
<li>
<p>ä¸æ¥ç¼–å†™Springä¸­çš„é…ç½®æ–‡ä»¶</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;bean id=&quot;helloService&quot; class=&quot;com.zth.springboot.service.HelloService&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
</li>
<li>
<p><strong>ä¸Šé¢è¿™ç§æ–¹å¼åœ¨SpringBoot2.xä¸­å·²ç»ä¸å†ä½¿ç”¨ï¼ï¼ï¼ï¼ï¼ï¼ï¼</strong></p>
</li>
<li>
<p>SpringBootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼ï¼šæ¨èä½¿ç”¨å…¨æ³¨è§£çš„æ–¹å¼</p>
<ol>
<li>é…ç½®ç±»**@Configuration** -----&gt; Springé…ç½®æ–‡ä»¶</li>
<li>ä½¿ç”¨**@Bean**ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</li>
</ol>
<pre><code class="language-java">/**
 * @Configurationï¼šæŒ‡æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼›å°±æ˜¯æ¥æ›¿ä»£ä¹‹å‰çš„Springé…ç½®æ–‡ä»¶
 * åœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨&lt;bean&gt;&lt;bean/&gt;æ ‡ç­¾æ·»åŠ ç»„ä»¶
 */
@Configuration
public class MyAppConfig {
    //å°†æ–¹æ³•çš„è¿”å›å€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›å®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å
    @Bean
    public HelloService helloService02(){
        System.out.println(&quot;é…ç½®ç±»@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶äº†...&quot;);
        return new HelloService();
    }
}
</code></pre>
</li>
</ul>
<h2 id="4-é…ç½®æ–‡ä»¶å ä½ç¬¦">4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</h2>
<h3 id="1-éšæœºæ•°">1ã€éšæœºæ•°</h3>
<pre><code class="language-java">${random.value}ã€${random.int}ã€${random.long}
${random.int(10)}ã€${random.int[1024,65536]}
</code></pre>
<h3 id="2-å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼å¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨æŒ‡å®šé»˜è®¤å€¼">2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨:æŒ‡å®šé»˜è®¤å€¼</h3>
<pre><code class="language-properties">person.last-name=å¼ ä¸‰${random.uuid}
person.age=${random.int}
person.birth=2017/12/15
person.boss=false
person.maps.k1=v1
person.maps.k2=14
person.lists=a,b,c
person.dog.name=${person.hello:hello}_dog
person.dog.age=15
</code></pre>
<h2 id="5-profile">5ã€Profile</h2>
<h3 id="1-å¤šprofileæ–‡ä»¶">1ã€å¤šProfileæ–‡ä»¶</h3>
<ul>
<li>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯   application-{profile}.properties/yml</li>
<li>å½“åˆ›å»ºå¤šä¸ªæ–‡ä»¶æ—¶ï¼Œé»˜è®¤ä½¿ç”¨application.propertiesçš„é…ç½®ï¼›</li>
</ul>
<h3 id="2-ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼">2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼</h3>
<ul>
<li>ymlæ›´ç®€æ´ä¸€äº›</li>
</ul>
<pre><code class="language-yml">server:
  port: 8081
spring:
  profiles:
    active: prod # æ¿€æ´»prodç¯å¢ƒ
---
server:
  port: 8083
spring:
  profiles: dev
---
server:
  port: 8084
spring:
  profiles: prod  #æŒ‡å®šå±äºå“ªä¸ªç¯å¢ƒ
</code></pre>
<h3 id="3-æ¿€æ´»æŒ‡å®šprofile">3ã€æ¿€æ´»æŒ‡å®šprofile</h3>
<p>1ã€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š  spring.profiles.active=devï¼ˆymlä¸­é…ç½®å¦‚ä¸Šï¼‰</p>
<p>2ã€å‘½ä»¤è¡Œï¼š</p>
<pre><code class="language-shell">java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar --spring.profiles.active=devï¼›
</code></pre>
<ul>
<li>å¯ä»¥ç›´æ¥åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œé…ç½®ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°ï¼Œåœ¨IDEAä¸­é…ç½®**--spring.profiles.active=dev**</li>
</ul>
<p>3ã€è™šæ‹Ÿæœºå‚æ•°ï¼›</p>
<pre><code class="language-shell">-Dspring.profiles.active=dev
</code></pre>
<h2 id="6-é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®">6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</h2>
<ul>
<li>
<p>springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶</p>
<ol>
<li>â€“file:./config/</li>
<li>â€“file:./</li>
<li>â€“classpath:/config/</li>
<li>â€“classpath:/</li>
</ol>
</li>
<li>
<p>ä¼˜å…ˆçº§ç”±é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼›</p>
</li>
<li>
<p>SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›<strong>äº’è¡¥é…ç½®</strong>ï¼›</p>
</li>
<li>
<p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®</p>
</li>
<li>
<p><strong>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›æŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„è¿™äº›é…ç½®æ–‡ä»¶å…±åŒèµ·ä½œç”¨å½¢æˆäº’è¡¥é…ç½®ï¼›</strong></p>
<pre><code class="language-shell">java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --spring.config.location=G:/application.properties
</code></pre>
</li>
</ul>
<h2 id="7-å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº">7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº</h2>
<ul>
<li>
<p><strong>SpringBootä¹Ÿå¯ä»¥ä»ä»¥ä¸‹ä½ç½®åŠ è½½é…ç½®ï¼› ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼›é«˜ä¼˜å…ˆçº§çš„é…ç½®è¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼Œæ‰€æœ‰çš„é…ç½®ä¼šå½¢æˆäº’è¡¥é…ç½®</strong></p>
<ol>
<li><strong>å‘½ä»¤è¡Œå‚æ•°</strong></li>
</ol>
<ul>
<li>
<p>æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè¿›è¡ŒæŒ‡å®š</p>
<pre><code class="language-shell">java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --server.port=8087  --server.context-path=/abc
</code></pre>
</li>
<li>
<p>å¤šä¸ªé…ç½®ç”¨ç©ºæ ¼åˆ†å¼€ï¼› --é…ç½®é¡¹=å€¼</p>
</li>
</ul>
<ol start="2">
<li>æ¥è‡ªjava: comp/envçš„JNDIå±æ€§</li>
<li>Javaç³»ç»Ÿå±æ€§(System.getProperties())</li>
<li>æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡</li>
<li>RandomValuePropertySourceé…ç½®çš„random.*å±æ€§å€¼</li>
<li><strong>jaråŒ…å¤–éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></li>
<li><strong>jaråŒ…å†…éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></li>
</ol>
</li>
<li>
<p><strong>å†æ¥åŠ è½½ä¸å¸¦profile</strong></p>
<ol start="8">
<li><strong>jaråŒ…å¤–éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></li>
<li><strong>jaråŒ…å†…éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></li>
<li>@Configurationæ³¨è§£ç±»ä¸Šçš„@PropertySource</li>
<li>é€šè¿‡SpringApplication.setDefaultPropertiesæŒ‡å®šçš„é»˜è®¤å±æ€§</li>
</ol>
</li>
<li>
<p>æ‰€æœ‰æ”¯æŒçš„é…ç½®åŠ è½½æ¥æºï¼›<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#boot-features-external-config">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p>
</li>
</ul>
<h2 id="8-è‡ªåŠ¨é…ç½®åŸç†">8ã€è‡ªåŠ¨é…ç½®åŸç†</h2>
<ul>
<li>é…ç½®æ–‡ä»¶åˆ°åº•èƒ½å†™ä»€ä¹ˆï¼Ÿæ€ä¹ˆå†™ï¼Ÿè‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ</li>
<li><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#common-application-properties">é…ç½®æ–‡ä»¶èƒ½é…ç½®çš„å±æ€§å‚ç…§</a></li>
</ul>
<h3 id="1-è‡ªåŠ¨é…ç½®åŸç†">1ã€<strong>è‡ªåŠ¨é…ç½®åŸç†</strong></h3>
<ol>
<li>
<p>SpringBootå¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½**@EnableAutoConfiguration**</p>
</li>
<li>
<p><strong>@EnableAutoConfigurationçš„ä½œç”¨</strong></p>
<ul>
<li>
<p>åˆ©ç”¨EnableAutoConfigurationImportSelectorç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶ï¼Ÿ</p>
</li>
<li>
<p>å¯ä»¥æŸ¥çœ‹selectImports()æ–¹æ³•çš„å†…å®¹</p>
</li>
<li>
<p>List<String> configurations = getCandidateConfigurations(annotationMetadata, attributes);è·å–å€™é€‰çš„é…ç½®</p>
<pre><code class="language-java">SpringFactoriesLoader.loadFactoryNames()
æ‰«ææ‰€æœ‰jaråŒ…ç±»è·¯å¾„ä¸‹  META-INF/spring.factories
æŠŠæ‰«æåˆ°çš„è¿™äº›æ–‡ä»¶çš„å†…å®¹åŒ…è£…æˆpropertieså¯¹è±¡
ä»propertiesä¸­è·å–åˆ°EnableAutoConfiguration.classç±»ï¼ˆç±»åï¼‰å¯¹åº”çš„å€¼ï¼Œç„¶åæŠŠä»–ä»¬æ·»åŠ åœ¨å®¹å™¨ä¸­
</code></pre>
</li>
<li>
<p>å°†ç±»è·¯å¾„ä¸‹çš„ META-INF/spring.factoriesé‡Œé¢é…ç½®çš„æ‰€æœ‰EnableAutoConfigurationçš„å€¼åŠ å…¥åˆ°äº†å®¹å™¨ä¸­ï¼›</p>
</li>
</ul>
<pre><code class="language-properties"># Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\
org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\...
# çœç•¥è‹¥å¹²
</code></pre>
<ul>
<li>æ¯ä¸€ä¸ªè¿™æ ·çš„  xxxAutoConfigurationç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼›ç”¨ä»–ä»¬æ¥åšè‡ªåŠ¨é…ç½®ï¼›</li>
</ul>
</li>
<li>
<p>æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›</p>
</li>
<li>
<p>ä»¥**HttpEncodingAutoConfigurationï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰**ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†ï¼›</p>
<pre><code class="language-java">// è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶
@Configuration

// å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›å°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼›å¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­
@EnableConfigurationProperties(HttpProperties.class)

// Springåº•å±‚@Conditionalæ³¨è§£ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ
@ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET)

// åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼›
@ConditionalOnClass(CharacterEncodingFilter.class)

// åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®  spring.http.encoding.enabledï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„
@ConditionalOnProperty(prefix = &quot;spring.http.encoding&quot;, value = &quot;enabled&quot;, matchIfMissing = true)
public class HttpEncodingAutoConfiguration {
  // è¿™é‡Œä¸SpringBooté…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„
  private final HttpProperties.Encoding properties;
  
  // åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿
	public HttpEncodingAutoConfiguration(HttpProperties properties) {
		this.properties = properties.getEncoding();
	}
	@Bean // ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–
	@ConditionalOnMissingBean // åˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦æœ‰è¿™ä¸ªç»„ä»¶
	public CharacterEncodingFilter characterEncodingFilter() {
		CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter();
		filter.setEncoding(this.properties.getCharset().name());
		filter.setForceRequestEncoding(this.properties.shouldForce(Type.REQUEST));
		filter.setForceResponseEncoding(this.properties.shouldForce(Type.RESPONSE));
		return filter;
	}
}
</code></pre>
<ul>
<li>
<p>æ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»ï¼Œæ˜¯å¦ç”Ÿæ•ˆ</p>
</li>
<li>
<p>ä¸€æ—¦è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼›è¿™äº›ç»„ä»¶çš„å±æ€§éƒ½æ˜¯åœ¨xxxxPropertiesç±»ä¸­å°è£…ç€ï¼›é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªé…ç½®ç±»</p>
<pre><code class="language-java">// ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š
@ConfigurationProperties(prefix = &quot;spring.http&quot;)
public class HttpProperties {
  public static class Encoding {
    public static final Charset DEFAULT_CHARSET = StandardCharsets.UTF_8;
  }
}
</code></pre>
</li>
</ul>
</li>
</ol>
<ul>
<li>
<p><strong>SpringBootçš„ç²¾é«“</strong></p>
<ol>
<li><strong>SpringBootä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</strong></li>
<li><strong>æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»</strong></li>
<li><strong>æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›(åªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶æœ‰ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¥é…ç½®äº†)</strong></li>
<li><strong>ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼ï¼›</strong></li>
</ol>
</li>
<li>
<p>xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›</p>
</li>
<li>
<p>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p>
</li>
<li>
<p>xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</p>
</li>
</ul>
<h3 id="2-ç»†èŠ‚">2ã€ç»†èŠ‚</h3>
<h4 id="1-conditionalæ´¾ç”Ÿæ³¨è§£springä¸­åŸç”Ÿçš„conditionalä½œç”¨">1ã€@Conditionalæ´¾ç”Ÿæ³¨è§£(Springä¸­åŸç”Ÿçš„@Conditionalä½œç”¨)</h4>
<ul>
<li>
<p>ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆï¼›</p>
<table>
<thead>
<tr>
<th>@Conditionalæ‰©å±•æ³¨è§£</th>
<th>ä½œç”¨ï¼ˆåˆ¤æ–­æ˜¯å¦æ»¡è¶³å½“å‰æŒ‡å®šæ¡ä»¶ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>@ConditionalOnJava</td>
<td>ç³»ç»Ÿçš„javaç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®šBeanï¼›</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanï¼›</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>æ»¡è¶³SpELè¡¨è¾¾å¼æŒ‡å®š</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>ç³»ç»Ÿä¸­æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>ç³»ç»Ÿä¸­æ²¡æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªæŒ‡å®šçš„Beanï¼Œæˆ–è€…è¿™ä¸ªBeanæ˜¯é¦–é€‰Bean</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>ç³»ç»Ÿä¸­æŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŒ‡å®šèµ„æºæ–‡ä»¶</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>å½“å‰æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>å½“å‰ä¸æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDIå­˜åœ¨æŒ‡å®šé¡¹</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h4 id="2-è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆ">2ã€è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆ</h4>
<ul>
<li>
<p>æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼Ÿ</p>
</li>
<li>
<p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨  debug=trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Š</strong>ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆ</p>
<pre><code class="language-shell">============================
CONDITIONS EVALUATION REPORT
============================
Positive matches: ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼‰
-----------------
CodecsAutoConfiguration matched:
    - @ConditionalOnClass found required class 'org.springframework.http.codec.CodecConfigurer' (OnClassCondition)

CodecsAutoConfiguration.JacksonCodecConfiguration matched:
    - @ConditionalOnClass found required class 'com.fasterxml.jackson.databind.ObjectMapper' (OnClassCondition)
    ä¸‹é¢è‹¥å¹²çœç•¥...
    
Negative matches:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼‰
-----------------
ActiveMQAutoConfiguration:
    Did not match:
        - @ConditionalOnClass did not find required classes 'javax.jms.ConnectionFactory', 'org.apache.activemq.ActiveMQConnectionFactory' (OnClassCondition)

AopAutoConfiguration:
    Did not match:
        - @ConditionalOnClass did not find required classes 'org.aspectj.lang.annotation.Aspect', 'org.aspectj.lang.reflect.Advice' (OnClassCondition)
</code></pre>
</li>
</ul>
<hr>

        </div>

        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://Zu3zz.github.io/tag/VaOfOOWC5/">
            <span class="flex-auto">SpringBoot</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://Zu3zz.github.io/tag/tqQSAbU7V/">
            <span class="flex-auto">BackEnd</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://Zu3zz.github.io/tag/_el9BOoeY/">
            <span class="flex-auto">Java</span>
          </a>
        


        <div class="flex justify-between py-8">
          
            <div class="prev-post">
              <a href="https://Zu3zz.github.io/post/springboot-3/">
                <h3 class="post-title">
                  <i class="remixicon-arrow-left-line"></i>
                  SpringBootç³»åˆ—(3) ---- æ—¥å¿—
                </h3>
              </a>
            </div>
          

          
            <div class="next-post">
              <a href="https://Zu3zz.github.io/post/springboot-1/">
                <h3 class="post-title">
                  SpringBootç³»åˆ—(1) ---- SpringBootå…¥é—¨
                  <i class="remixicon-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        

      </div>
    </div>

    <script src="https://Zu3zz.github.io//media/prism.js"></script>  
<script>

Prism.highlightAll()

let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
