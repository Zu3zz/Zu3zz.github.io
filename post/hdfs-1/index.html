<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>é£è¢–</title>
<meta name="description" content="çƒŸè›¾æ•›ç•¥ä¸èƒœæ€ï¼Œé£è¢–ä½æ˜‚å¦‚æœ‰æƒ…" />
<link rel="shortcut icon" href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/favicon.ico?v=1581008586029">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="é£è¢– - Atom Feed" href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/atom.xml">



  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="remixicon-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://e.coding.net/zu3zz/zu3zz.coding.me.git">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://e.coding.net/zu3zz/zu3zz.coding.me.git/images/avatar.png?v=1581008586029" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">é£è¢–</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            æ–‡ç« ç›®å½•
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li><a href="#hdfs-%E6%A6%82%E8%BF%B0">HDFS æ¦‚è¿°</a>
<ul>
<li><a href="#hdfs-%E6%98%AF%E4%B8%80%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">HDFS æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ</a></li>
<li><a href="#hdfs-%E5%89%8D%E6%8F%90%E5%92%8C%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87">HDFS å‰æå’Œè®¾è®¡ç›®æ ‡</a></li>
<li><a href="#hdfs-%E7%9A%84%E6%9E%B6%E6%9E%84">HDFS çš„æ¶æ„</a></li>
<li><a href="#%E8%AF%BE%E7%A8%8B%E7%8E%AF%E5%A2%83%E4%BB%8B%E7%BB%8D">è¯¾ç¨‹ç¯å¢ƒä»‹ç»ï¼š</a>
<ul>
<li><a href="#%E6%9C%AC%E8%AF%BE%E7%A8%8B%E5%BD%95%E5%88%B6%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%98%AF-mac%E6%89%80%E4%BB%A5%E6%88%91%E9%87%87%E7%94%A8%E7%9A%84-linux-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%98%AF-mac-%E8%87%AA%E5%B8%A6%E7%9A%84-shell">æœ¬è¯¾ç¨‹å½•åˆ¶çš„ç³»ç»Ÿæ˜¯ Macï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨çš„ linux å®¢æˆ·ç«¯æ˜¯ mac è‡ªå¸¦çš„ shell</a></li>
<li><a href="#hadoop-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">Hadoop ç¯å¢ƒæ­å»º</a></li>
<li><a href="#hadoophivespark-%E7%9B%B8%E5%85%B3%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AD%A6%E4%B9%A0">Hadoop/Hive/Spark ç›¸å…³æ¡†æ¶çš„å­¦ä¹ ï¼š</a></li>
<li><a href="#hadoop-%E5%AE%89%E8%A3%85%E5%89%8D%E7%BD%AE%E8%A6%81%E6%B1%82">Hadoop å®‰è£…å‰ç½®è¦æ±‚</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-java">å®‰è£… Java</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-ssh-%E6%97%A0%E5%AF%86%E7%A0%81%E7%99%BB%E9%99%86">å®‰è£… ssh æ— å¯†ç ç™»é™†</a></li>
<li><a href="#hadoophdfs%E5%AE%89%E8%A3%85">Hadoop(HDFS)å®‰è£…</a></li>
<li><a href="#hadoop-%E8%BD%AF%E4%BB%B6%E5%8C%85%E5%B8%B8%E8%A7%81%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E">hadoop è½¯ä»¶åŒ…å¸¸è§ç›®å½•è¯´æ˜</a></li>
<li><a href="#%E6%B3%A8%E6%84%8F">æ³¨æ„ï¼š</a></li>
<li><a href="#hdfs-%E5%AD%98%E5%82%A8%E6%89%A9%E5%B1%95">HDFS å­˜å‚¨æ‰©å±•ï¼š</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-hdfs-api-%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9D%A5%E6%93%8D%E4%BD%9C-hdfs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">ä½¿ç”¨ HDFS API çš„æ–¹å¼æ¥æ“ä½œ HDFS æ–‡ä»¶ç³»ç»Ÿ</a></li>
<li><a href="#hdfs-%E6%93%8D%E4%BD%9Cshell-java-api">HDFS æ“ä½œï¼šshell + Java API</a></li>
<li><a href="#%E5%81%87%E8%AE%BE%E6%9C%89%E7%9A%84%E5%B0%8F%E4%BC%99%E4%BC%B4%E4%BA%86%E8%A7%A3%E8%BF%87-mr-spark-%E7%AD%89%E7%AD%89%E8%A7%89%E5%BE%97%E8%BF%99%E4%B8%AA%E6%93%8D%E4%BD%9C%E5%BE%88%E7%AE%80%E5%8D%95">å‡è®¾ï¼šæœ‰çš„å°ä¼™ä¼´äº†è§£è¿‡ mrã€spark ç­‰ç­‰ï¼Œè§‰å¾—è¿™ä¸ªæ“ä½œå¾ˆç®€å•</a></li>
<li><a href="#%E6%9C%AC%E5%AE%9E%E6%88%98%E7%9A%84%E8%A6%81%E6%B1%82%E5%8F%AA%E5%85%81%E8%AE%B8%E4%BD%BF%E7%94%A8-hdfs-api-%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C">æœ¬å®æˆ˜çš„è¦æ±‚ï¼šåªå…è®¸ä½¿ç”¨ HDFS API è¿›è¡Œæ“ä½œ</a></li>
<li><a href="#%E7%9B%AE%E7%9A%84">ç›®çš„</a></li>
<li><a href="#%E7%A1%AC%E7%BC%96%E7%A0%81-%E9%9D%9E%E5%B8%B8%E5%BF%8C%E8%AE%B3%E7%9A%84">ç¡¬ç¼–ç  ï¼š éå¸¸å¿Œè®³çš„</a></li>
<li><a href="#%E5%8F%AF%E9%85%8D%E7%BD%AE">==&gt; å¯é…ç½®</a></li>
<li><a href="#%E5%8F%AF%E6%8F%92%E6%8B%94%E7%9A%84%E5%BC%80%E5%8F%91%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F-plugin">å¯æ’æ‹”çš„å¼€å‘/ç®¡ç†æ–¹å¼ plugin</a></li>
<li><a href="#%E5%89%AF%E6%9C%AC%E6%91%86%E6%94%BE%E7%AD%96%E7%95%A5">å‰¯æœ¬æ‘†æ”¾ç­–ç•¥</a></li>
<li><a href="#hdfs-%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86">HDFS çš„å…ƒæ•°æ®ç®¡ç†</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="remixicon-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="/" class="menu" style="animation-delay: 0s">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu" style="animation-delay: 0.2s">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu" style="animation-delay: 0.4s">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu" style="animation-delay: 0.6000000000000001s">
          å…³äº
        </a>
      
    
      
        <a href="/projects" class="menu" style="animation-delay: 0.8s">
          é¡¹ç›®
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700">By 3zz.</div>
    <a class="rss" href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">HDFSç³»åˆ—(1)----å®‰è£…</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2019-09-13 / 9 min read
        </div>
        
        <div class="post-content yue">
          <p>ğŸ›´è¿™ç¯‡æ–‡ç« å’±ä»¬å°±æ¥è®²è®²å¦‚ä½•å®‰è£…HDFS</p>
<!-- more -->
<h1 id="hdfs-æ¦‚è¿°">HDFS æ¦‚è¿°</h1>
<ol>
<li>åˆ†å¸ƒå¼</li>
<li>commodity hardware</li>
<li>fault-tolerant å®¹é”™</li>
<li>high throughput</li>
<li>large data sets</li>
</ol>
<h2 id="hdfs-æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ">HDFS æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ</h2>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿï¼šLinuxã€Windowsã€Mac....
<ul>
<li>ç›®å½•ç»“æ„: C /</li>
<li>å­˜æ”¾çš„æ˜¯æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</li>
<li>å¯¹å¤–æä¾›æœåŠ¡ï¼šåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥çœ‹ã€ç§»åŠ¨ç­‰ç­‰</li>
<li>æ™®é€šæ–‡ä»¶ç³»ç»Ÿ vs åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ
<ul>
<li>å•æœº</li>
<li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿèƒ½å¤Ÿæ¨ªè·¨ N ä¸ªæœºå™¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="hdfs-å‰æå’Œè®¾è®¡ç›®æ ‡">HDFS å‰æå’Œè®¾è®¡ç›®æ ‡</h2>
<ul>
<li>Hardware Failure ç¡¬ä»¶é”™è¯¯
<ul>
<li>æ¯ä¸ªæœºå™¨åªå­˜å‚¨æ–‡ä»¶çš„éƒ¨åˆ†æ•°æ®ï¼Œblocksize=128M</li>
<li>block å­˜æ”¾åœ¨ä¸åŒçš„æœºå™¨ä¸Šçš„ï¼Œç”±äºå®¹é”™ï¼ŒHDFS é»˜è®¤é‡‡ç”¨ 3 å‰¯æœ¬æœºåˆ¶</li>
</ul>
</li>
<li>Streaming Data Access æµå¼æ•°æ®è®¿é—®
<ul>
<li>The emphasis is on high throughput of data access</li>
<li>rather than low latency of data access.</li>
</ul>
</li>
<li>Large Data Sets å¤§è§„æ¨¡æ•°æ®é›†</li>
<li>Moving Computation is Cheaper than Moving Data ç§»åŠ¨è®¡ç®—æ¯”ç§»åŠ¨æ•°æ®æ›´åˆ’ç®—</li>
</ul>
<h2 id="hdfs-çš„æ¶æ„">HDFS çš„æ¶æ„</h2>
<ol>
<li>NameNode(master) and DataNodes(slave)</li>
<li>master/slave çš„æ¶æ„</li>
<li>NN:</li>
</ol>
<ul>
<li>the file system namespace
<ul>
<li>/home/hadoop/software</li>
<li>/home/hadoop/app</li>
<li>regulates access to files by clients</li>
</ul>
</li>
</ul>
<ol start="4">
<li>
<p>DNï¼šstorage</p>
</li>
<li>
<p>HDFS exposes a file system namespace and allows user data to be stored in files.</p>
</li>
<li>
<p>a file is split into one or more blocks</p>
<ul>
<li>blocksize: 128M</li>
<li>150M æ‹†æˆ 2 ä¸ª block</li>
</ul>
</li>
<li>
<p>blocks are stored in a set of DataNodes</p>
<ul>
<li>ä¸ºä»€ä¹ˆï¼Ÿ å®¹é”™ï¼ï¼ï¼</li>
</ul>
</li>
<li>
<p>NameNode executes file system namespace operationsï¼šCRUD</p>
</li>
<li>
<p>determines the mapping of blocks to DataNodes</p>
<ul>
<li>
<p>a.txt 150M blocksize=128M</p>
</li>
<li>
<p>a.txt æ‹†åˆ†æˆ 2 ä¸ª block ä¸€ä¸ªæ˜¯ block1ï¼š128M å¦ä¸€ä¸ªæ˜¯ block2ï¼š22M<br>
block1 å­˜æ”¾åœ¨å“ªä¸ª DNï¼Ÿblock2 å­˜æ”¾åœ¨å“ªä¸ª DNï¼Ÿ</p>
</li>
<li>
<p>a.txt<br>
_ block1ï¼š128M, 192.168.199.1<br>
_ block2ï¼š22M, 192.168.199.2<br>
_ get a.txt<br>
_ è¿™ä¸ªè¿‡ç¨‹å¯¹äºç”¨æˆ·æ¥è¯´æ˜¯ä¸æ„ŸçŸ¥çš„</p>
</li>
</ul>
</li>
<li>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼š1 ä¸ª Node éƒ¨ç½²ä¸€ä¸ªç»„ä»¶</p>
</li>
</ol>
<h2 id="è¯¾ç¨‹ç¯å¢ƒä»‹ç»">è¯¾ç¨‹ç¯å¢ƒä»‹ç»ï¼š</h2>
<h3 id="æœ¬è¯¾ç¨‹å½•åˆ¶çš„ç³»ç»Ÿæ˜¯-macæ‰€ä»¥æˆ‘é‡‡ç”¨çš„-linux-å®¢æˆ·ç«¯æ˜¯-mac-è‡ªå¸¦çš„-shell">æœ¬è¯¾ç¨‹å½•åˆ¶çš„ç³»ç»Ÿæ˜¯ Macï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨çš„ linux å®¢æˆ·ç«¯æ˜¯ mac è‡ªå¸¦çš„ shell</h3>
<ul>
<li>å¦‚æœä½ ä»¬æ˜¯ winï¼šxshellã€crt</li>
<li>æœåŠ¡å™¨/linux åœ°å€ï¼š192.168.199.233</li>
<li>è¿æ¥åˆ° linux ç¯å¢ƒ<br>
_ ç™»é™†ï¼šssh hadoop@192.168.199.233<br>
_ ç™»é™†æˆåŠŸä»¥åï¼š[hadoop@hadoop000 ~]$
<ul>
<li>linuxæœºå™¨ï¼šç”¨æˆ·åhadoopã€å¯†ç 123456ã€hostnameæ˜¯* * hadoop000</li>
<li>åˆ›å»ºè¯¾ç¨‹ä¸­æ‰€éœ€è¦çš„ç›®å½•ï¼ˆåˆé€‚çš„æ–‡ä»¶å­˜æ”¾åœ¨åˆé€‚çš„ç›®å½•ï¼‰
<ol>
<li>[hadoop@hadoop000 ~]$ mkdir software å­˜æ”¾è¯¾ç¨‹æ‰€ä½¿ç”¨çš„è½¯ä»¶å®‰è£…åŒ… 2. [hadoop@hadoop000 ~]$ mkdir app       å­˜æ”¾è¯¾ç¨‹æ‰€æœ‰è½¯ä»¶çš„å®‰è£…ç›®å½•</li>
<li>[hadoop@hadoop000 ~]$ mkdir data å­˜æ”¾è¯¾ç¨‹ä¸­ä½¿ç”¨çš„æ•°æ® 4. [hadoop@hadoop000 ~]$ mkdir lib       å­˜æ”¾è¯¾ç¨‹ä¸­å¼€å‘è¿‡çš„ä½œä¸šjarå­˜æ”¾çš„ç›®å½•</li>
<li>[hadoop@hadoop000 ~]$ mkdir shell å­˜æ”¾è¯¾ç¨‹ä¸­ç›¸å…³çš„è„šæœ¬ 6. [hadoop@hadoop000 ~]$ mkdir maven_resp å­˜æ”¾è¯¾ç¨‹ä¸­ä½¿ç”¨åˆ°çš„ maven ä¾èµ–åŒ…å­˜æ”¾çš„ç›®å½•</li>
</ol>
</li>
</ul>
</li>
<li>å­¦å‘˜é—®ï¼šroot å¯†ç  1. åˆ‡æ¢ hadoop åˆ° root ç”¨æˆ·ï¼š[hadoop@hadoop000 ~]$ sudo -i 2. åˆ‡æ¢ root åˆ° hadoop ç”¨æˆ·ï¼š[root@hadoop000 ~]# su hadoop 3. æˆ‘ OOTB ç¯å¢ƒä¸­åˆ›å»ºçš„ hadoop ç”¨æˆ·æ˜¯æœ‰ sudo æƒé™ï¼šsudo vi /etc/hosts</li>
<li>Linux ç‰ˆæœ¬ï¼š * ä»¥å‰çš„è¯¾ç¨‹æ˜¯ centos6.4ï¼Œæœ¬æ¬¡è¯¾ç¨‹å‡çº§æˆ centos7</li>
</ul>
<h3 id="hadoop-ç¯å¢ƒæ­å»º">Hadoop ç¯å¢ƒæ­å»º</h3>
<ul>
<li>ä½¿ç”¨çš„ Hadoop ç›¸å…³ç‰ˆæœ¬ï¼šCDH</li>
<li>CDH ç›¸å…³è½¯ä»¶åŒ…ä¸‹è½½åœ°å€ï¼šhttp://archive.cloudera.com/cdh5/cdh/5/</li>
<li>Hadoop ä½¿ç”¨ç‰ˆæœ¬ï¼šhadoop-2.6.0-cdh5.15.1</li>
<li>Hadoop ä¸‹è½½ï¼šwget http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.15.1.tar.gz</li>
<li>Hive ä½¿ç”¨ç‰ˆæœ¬ï¼šhive-1.1.0-cdh5.15.1</li>
</ul>
<h3 id="hadoophivespark-ç›¸å…³æ¡†æ¶çš„å­¦ä¹ ">Hadoop/Hive/Spark ç›¸å…³æ¡†æ¶çš„å­¦ä¹ ï¼š</h3>
<ul>
<li>
<p>ä½¿ç”¨å•æœºç‰ˆè¶³å¤Ÿ</p>
</li>
<li>
<p>å¦‚æœä½¿ç”¨é›†ç¾¤å­¦ä¹ ä¼šå¯¼è‡´ï¼šä»å…¥é—¨åˆ°æ”¾å¼ƒ</p>
</li>
<li>
<p>ä½¿ç”¨ Linux/Mac å­¦ä¹ </p>
</li>
<li>
<p>ä¸€å®šä¸è¦ä½¿ç”¨ Windows æ­å»º Hadoop ç¯å¢ƒ</p>
</li>
<li>
<p>æ‰€ä»¥ Linux åŸºç¡€æ˜¯è¦ä¼šçš„</p>
</li>
</ul>
<h3 id="hadoop-å®‰è£…å‰ç½®è¦æ±‚">Hadoop å®‰è£…å‰ç½®è¦æ±‚</h3>
<ul>
<li>Java 1.8+</li>
<li>ssh</li>
</ul>
<h3 id="å®‰è£…-java">å®‰è£… Java</h3>
<ul>
<li>æ‹·è´æœ¬åœ°è½¯ä»¶åŒ…åˆ°æœåŠ¡å™¨ï¼šscp jdk-8u91-linux-x64.tar.gz hadoop@192.168.199.233:~/software/</li>
<li>è§£å‹ jdk åˆ°~/app/ï¼štar -zvxf jdk-8u91-linux-x64.tar.gz -C ~/app/</li>
<li>æŠŠ jdk é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼š ~/.bash_profile - export JAVA_HOME=/home/hadoop/app/jdk1.8.0_91 - export PATH=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi><mi>A</mi><mi>V</mi><msub><mi>A</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>i</mi><mi>n</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">JAVA_HOME/bin:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>PATH</li>
<li>ä½¿å¾—é…ç½®ä¿®æ”¹ç”Ÿæ•ˆï¼šsource .bash_profile</li>
<li>éªŒè¯ï¼šjava -version</li>
</ul>
<h3 id="å®‰è£…-ssh-æ— å¯†ç ç™»é™†">å®‰è£… ssh æ— å¯†ç ç™»é™†</h3>
<ul>
<li>
<p>ls</p>
</li>
<li>
<p>ls -a</p>
</li>
<li>
<p>ls -la å¹¶æ²¡æœ‰å‘ç°ä¸€ä¸ª.ssh çš„æ–‡ä»¶å¤¹</p>
</li>
<li>
<p>ssh-keygen -t rsa ä¸€è·¯å›è½¦</p>
</li>
<li>
<p>cd ~/.ssh</p>
</li>
<li>
<p>[hadoop@hadoop000 .ssh]$ ll</p>
</li>
<li>
<p>æ€»ç”¨é‡ 12</p>
<pre><code class="language-shell">-rw------- 1 hadoop hadoop 1679 10æœˆ 15 02:54 id_rsa  ç§é’¥
-rw-r--r-- 1 hadoop hadoop  398 10æœˆ 15 02:54 id_rsa.pub å…¬é’¥
-rw-r--r-- 1 hadoop hadoop  358 10æœˆ 15 02:54 known_hosts
cat id_rsa.pub &gt;&gt; authorized_keys
chmod 600 authorized_keys
</code></pre>
</li>
</ul>
<h3 id="hadoophdfså®‰è£…">Hadoop(HDFS)å®‰è£…</h3>
<ul>
<li>
<p>ä¸‹è½½<br>
_ è§£å‹ï¼š~/app<br>
_ æ·»åŠ  HADOOP_HOME/bin åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡<br>
_ ä¿®æ”¹ Hadoop é…ç½®æ–‡ä»¶</p>
<pre><code class="language-shell"># hadoop-env.sh
export JAVA_HOME=/home/hadoop/app/jdk1.8.0_91
</code></pre>
<p>_ core-site.xml</p>
<pre><code class="language-xml">  &lt;property&gt;
      &lt;name&gt;fs.defaultFS&lt;/name&gt;
      &lt;value&gt;hdfs://hadoop000:8020&lt;/value&gt;
  &lt;/property&gt;

  hdfs-site.xml
  &lt;property&gt;
      &lt;name&gt;dfs.replication&lt;/name&gt;
      &lt;value&gt;1&lt;/value&gt;
  &lt;/property&gt;

  &lt;property&gt;
      &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
      &lt;value&gt;/home/hadoop/app/tmp&lt;/value&gt;
  &lt;/property&gt;
</code></pre>
<ul>
<li>slaves<br>
_ hadoop000<br>
_ å¯åŠ¨ HDFSï¼š<br>
_ ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ä¸€å®šè¦æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿï¼Œä¸è¦é‡å¤æ‰§è¡Œ: hdfs namenode -format<br>
_ å¯åŠ¨é›†ç¾¤ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>A</mi><mi>D</mi><mi>O</mi><mi>O</mi><msub><mi>P</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>b</mi><mi>i</mi><mi>n</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo>âˆ’</mo><mi>d</mi><mi>f</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mo>âˆ—</mo><mi mathvariant="normal">éªŒ</mi><mi mathvariant="normal">è¯</mi><mo>:</mo><mn>1.</mn><mo>[</mo><mi>h</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>o</mi><mi>p</mi><mi mathvariant="normal">@</mi><mi>h</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>o</mi><mi>p</mi><mn>000</mn><mi>s</mi><mi>b</mi><mi>i</mi><mi>n</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">HADOOP_HOME/sbin/start-dfs.sh
	* éªŒè¯:
		1. [hadoop@hadoop000 sbin]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">.</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord cjk_fallback">éªŒ</span><span class="mord cjk_fallback">è¯</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mopen">[</span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord">@</span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault">s</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span> jps 2. 60002 DataNode 3. 60171 SecondaryNameNode 4. 59870 NameNode 5. http://192.168.199.233:50070 6. å¦‚æœå‘ç° jps okï¼Œä½†æ˜¯æµè§ˆå™¨ä¸ OKï¼Ÿ åæœ‰å…«ä¹æ˜¯é˜²ç«å¢™é—®é¢˜ 7. æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼šsudo firewall-cmd --state 8. å…³é—­é˜²ç«å¢™: sudo systemctl stop firewalld.service 9. è¿›åˆ¶é˜²ç«å¢™å¼€æœºå¯åŠ¨ï¼š</li>
</ul>
</li>
</ul>
<h3 id="hadoop-è½¯ä»¶åŒ…å¸¸è§ç›®å½•è¯´æ˜">hadoop è½¯ä»¶åŒ…å¸¸è§ç›®å½•è¯´æ˜</h3>
<ul>
<li>binï¼šhadoop å®¢æˆ·ç«¯åå•</li>
<li>etc/hadoopï¼šhadoop ç›¸å…³çš„é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•</li>
<li>sbinï¼šå¯åŠ¨ hadoop ç›¸å…³è¿›ç¨‹çš„è„šæœ¬</li>
<li>shareï¼šå¸¸ç”¨ä¾‹å­</li>
</ul>
<h3 id="æ³¨æ„">æ³¨æ„ï¼š</h3>
<ul>
<li>
<p>start/stop-dfs.sh ä¸ hadoop-daemons.sh çš„å…³ç³»</p>
</li>
<li>
<p>start-dfs.sh</p>
<pre><code class="language-shell">hadoop-daemons.sh start namenode
hadoop-daemons.sh start datanode
hadoop-daemons.sh start secondarynamenode
</code></pre>
</li>
<li>
<p>stop-dfs.sh =</p>
</li>
<li>
<p>hadoop å¸¸ç”¨å‘½ä»¤ï¼š</p>
<ol>
<li>hadoop fs -ls /</li>
<li>hadoop fs -put</li>
<li>hadoop fs -copyFromLocal</li>
<li>hadoop fs -moveFromLocal</li>
<li>hadoop fs -cat</li>
<li>hadoop fs -text</li>
<li>hadoop fs -get</li>
<li>hadoop fs -mkdir</li>
<li>hadoop fs -mv ç§»åŠ¨/æ”¹å</li>
<li>hadoop fs -getmerge</li>
<li>hadoop fs -rm</li>
<li>hadoop fs -rmdir</li>
<li>hadoop fs -rm -r</li>
</ol>
</li>
</ul>
<h3 id="hdfs-å­˜å‚¨æ‰©å±•">HDFS å­˜å‚¨æ‰©å±•ï¼š</h3>
<ul>
<li>put: 1file ==&gt; 1...n block ==&gt; å­˜æ”¾åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šçš„</li>
<li>get: å» nn ä¸ŠæŸ¥æ‰¾è¿™ä¸ª file å¯¹åº”çš„å…ƒæ•°æ®ä¿¡æ¯</li>
<li>äº†è§£åº•å±‚çš„å­˜å‚¨æœºåˆ¶è¿™æ‰æ˜¯æˆ‘ä»¬çœŸæ­£è¦å­¦ä¹ çš„ä¸œè¥¿ï¼ŒæŒæ¡ API é‚£æ˜¯æ¯›æ¯›é›¨</li>
</ul>
<h3 id="ä½¿ç”¨-hdfs-api-çš„æ–¹å¼æ¥æ“ä½œ-hdfs-æ–‡ä»¶ç³»ç»Ÿ">ä½¿ç”¨ HDFS API çš„æ–¹å¼æ¥æ“ä½œ HDFS æ–‡ä»¶ç³»ç»Ÿ</h3>
<ul>
<li>IDEA/Eclipse</li>
<li>Java
<ul>
<li>ä½¿ç”¨ Maven æ¥ç®¡ç†é¡¹ç›®</li>
<li>æ‹·è´ jar åŒ…</li>
<li>æˆ‘çš„æ‰€æœ‰è¯¾ç¨‹éƒ½æ˜¯ä½¿ç”¨ maven æ¥è¿›è¡Œç®¡ç†çš„</li>
</ul>
</li>
</ul>
<pre><code class="language-shell">Caused by: org.apache.hadoop.ipc.RemoteException
(org.apache.hadoop.security.AccessControlException):
Permission denied: user=rocky, access=WRITE,
inode=&quot;/&quot;:hadoop:supergroup:drwxr-xr-x
</code></pre>
<h3 id="hdfs-æ“ä½œshell-java-api">HDFS æ“ä½œï¼šshell + Java API</h3>
<ul>
<li>ç»¼åˆæ€§çš„ HDFS å®æˆ˜ï¼šä½¿ç”¨ HDFS Java API æ‰å®Œæˆ HDFS æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶çš„è¯é¢‘ç»Ÿè®¡</li>
<li>è¯é¢‘ç»Ÿè®¡ï¼šwordcount
<ul>
<li>/path/1.txt</li>
<li>hello world hello</li>
<li>/path/2.txt</li>
<li>hello world hello
<ul>
<li>==&gt; (hello,4) (world,2)</li>
</ul>
</li>
</ul>
</li>
<li>å°†ç»Ÿè®¡å®Œçš„ç»“æœè¾“å‡ºåˆ° HDFS ä¸Šå»ã€‚</li>
</ul>
<h3 id="å‡è®¾æœ‰çš„å°ä¼™ä¼´äº†è§£è¿‡-mr-spark-ç­‰ç­‰è§‰å¾—è¿™ä¸ªæ“ä½œå¾ˆç®€å•">å‡è®¾ï¼šæœ‰çš„å°ä¼™ä¼´äº†è§£è¿‡ mrã€spark ç­‰ç­‰ï¼Œè§‰å¾—è¿™ä¸ªæ“ä½œå¾ˆç®€å•</h3>
<h3 id="æœ¬å®æˆ˜çš„è¦æ±‚åªå…è®¸ä½¿ç”¨-hdfs-api-è¿›è¡Œæ“ä½œ">æœ¬å®æˆ˜çš„è¦æ±‚ï¼šåªå…è®¸ä½¿ç”¨ HDFS API è¿›è¡Œæ“ä½œ</h3>
<h3 id="ç›®çš„">ç›®çš„</h3>
<ol>
<li>æŒæ¡ HDFS API çš„æ“ä½œ</li>
<li>é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œè®©ä½ ä»¬å¯¹äºåç»­è¦å­¦ä¹ çš„ mr æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è®¤è¯†</li>
</ol>
<h3 id="ç¡¬ç¼–ç -éå¸¸å¿Œè®³çš„">ç¡¬ç¼–ç  ï¼š éå¸¸å¿Œè®³çš„</h3>
<h3 id="å¯é…ç½®">==&gt; å¯é…ç½®</h3>
<h3 id="å¯æ’æ‹”çš„å¼€å‘ç®¡ç†æ–¹å¼-plugin">å¯æ’æ‹”çš„å¼€å‘/ç®¡ç†æ–¹å¼ plugin</h3>
<h3 id="å‰¯æœ¬æ‘†æ”¾ç­–ç•¥">å‰¯æœ¬æ‘†æ”¾ç­–ç•¥</h3>
<ul>
<li>
<p>1-æœ¬ rack çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>2-å¦å¤–ä¸€ä¸ª rack çš„èŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>3-ä¸ 2 ç›¸åŒçš„ rack çš„å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>1-æœ¬ rack çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>2-æœ¬ rack çš„å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>3-ä¸åŒ rack çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
</ul>
<h3 id="hdfs-çš„å…ƒæ•°æ®ç®¡ç†">HDFS çš„å…ƒæ•°æ®ç®¡ç†</h3>
<ul>
<li>å…ƒæ•°æ®ï¼šHDFS çš„ç›®å½•ç»“æ„ä»¥åŠæ¯ä¸ªæ–‡ä»¶çš„ BLOCK ä¿¡æ¯(idï¼Œå‰¯æœ¬ç³»æ•°ã€block å­˜æ”¾åœ¨å“ªä¸ª DN ä¸Š)</li>
<li>å­˜åœ¨ä»€ä¹ˆåœ°æ–¹ï¼šå¯¹åº”é…ç½® ${hadoop.tmp.dir}/name/......</li>
<li>å…ƒæ•°æ®å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼š</li>
</ul>
<pre><code class="language-shell">/test1
/test1/a.txt
/test2
/test2/1.txt
/test2/2.txt
</code></pre>

        </div>

        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/tag/uge4gU_2X">
            <span class="flex-auto">Hadoop</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/tag/yf0i5Glys">
            <span class="flex-auto">Linux</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/tag/gIc76HpAW">
            <span class="flex-auto">BigData</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/tag/egbOn_Rcj">
            <span class="flex-auto">MapReduce</span>
          </a>
        


        <div class="flex justify-between py-8">
          
            <div class="prev-post">
              <a href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/post/leetcode-double-week-10">
                <h3 class="post-title">
                  <i class="remixicon-arrow-left-line"></i>
                  LeetCode-double-week-10
                </h3>
              </a>
            </div>
          

          
            <div class="next-post">
              <a href="https://e.coding.net/zu3zz/zu3zz.coding.me.git/post/yarn-1">
                <h3 class="post-title">
                  Yarnç³»åˆ— ---- åŸºç¡€ã€ä»‹ç»ã€æµç¨‹
                  <i class="remixicon-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        

      </div>
    </div>

    <script src="https://e.coding.net/zu3zz/zu3zz.coding.me.git/media/prism.js"></script>  
<script>

Prism.highlightAll()

let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
