<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>HDFSç³»åˆ—(1)----å®‰è£… | é£è¢–</title>
<meta name="description" content="çƒŸè›¾æ•›ç•¥ä¸èƒœæ€ï¼Œé£è¢–ä½æ˜‚å¦‚æœ‰æƒ…">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://zu3zz.github.io/favicon.ico?v=1589731257565">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://zu3zz.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://zu3zz.github.io">
        <img src="https://zu3zz.github.io/images/avatar.png?v=1589731257565" class="site-logo">
        <h1 class="site-title">é£è¢–</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
        
          <a href="/projects" class="site-nav">
            é¡¹ç›®
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/Zu3zz" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      çƒŸè›¾æ•›ç•¥ä¸èƒœæ€ï¼Œé£è¢–ä½æ˜‚å¦‚æœ‰æƒ…
    </div>
    <div class="site-footer">
      By 3zz. | <a class="rss" href="https://zu3zz.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">HDFSç³»åˆ—(1)----å®‰è£…</h2>
            <div class="post-date">2019-09-13</div>
            
            <div class="post-content">
              <p>ğŸ›´è¿™ç¯‡æ–‡ç« å’±ä»¬å°±æ¥è®²è®²å¦‚ä½•å®‰è£…HDFS</p>
<!-- more -->
<h1 id="hdfs-æ¦‚è¿°">HDFS æ¦‚è¿°</h1>
<ol>
<li>åˆ†å¸ƒå¼</li>
<li>commodity hardware</li>
<li>fault-tolerant å®¹é”™</li>
<li>high throughput</li>
<li>large data sets</li>
</ol>
<h2 id="hdfs-æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ">HDFS æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ</h2>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿï¼šLinuxã€Windowsã€Mac....
<ul>
<li>ç›®å½•ç»“æ„: C /</li>
<li>å­˜æ”¾çš„æ˜¯æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</li>
<li>å¯¹å¤–æä¾›æœåŠ¡ï¼šåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥çœ‹ã€ç§»åŠ¨ç­‰ç­‰</li>
<li>æ™®é€šæ–‡ä»¶ç³»ç»Ÿ vs åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ
<ul>
<li>å•æœº</li>
<li>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿèƒ½å¤Ÿæ¨ªè·¨ N ä¸ªæœºå™¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="hdfs-å‰æå’Œè®¾è®¡ç›®æ ‡">HDFS å‰æå’Œè®¾è®¡ç›®æ ‡</h2>
<ul>
<li>Hardware Failure ç¡¬ä»¶é”™è¯¯
<ul>
<li>æ¯ä¸ªæœºå™¨åªå­˜å‚¨æ–‡ä»¶çš„éƒ¨åˆ†æ•°æ®ï¼Œblocksize=128M</li>
<li>block å­˜æ”¾åœ¨ä¸åŒçš„æœºå™¨ä¸Šçš„ï¼Œç”±äºå®¹é”™ï¼ŒHDFS é»˜è®¤é‡‡ç”¨ 3 å‰¯æœ¬æœºåˆ¶</li>
</ul>
</li>
<li>Streaming Data Access æµå¼æ•°æ®è®¿é—®
<ul>
<li>The emphasis is on high throughput of data access</li>
<li>rather than low latency of data access.</li>
</ul>
</li>
<li>Large Data Sets å¤§è§„æ¨¡æ•°æ®é›†</li>
<li>Moving Computation is Cheaper than Moving Data ç§»åŠ¨è®¡ç®—æ¯”ç§»åŠ¨æ•°æ®æ›´åˆ’ç®—</li>
</ul>
<h2 id="hdfs-çš„æ¶æ„">HDFS çš„æ¶æ„</h2>
<ol>
<li>NameNode(master) and DataNodes(slave)</li>
<li>master/slave çš„æ¶æ„</li>
<li>NN:</li>
</ol>
<ul>
<li>the file system namespace
<ul>
<li>/home/hadoop/software</li>
<li>/home/hadoop/app</li>
<li>regulates access to files by clients</li>
</ul>
</li>
</ul>
<ol start="4">
<li>
<p>DNï¼šstorage</p>
</li>
<li>
<p>HDFS exposes a file system namespace and allows user data to be stored in files.</p>
</li>
<li>
<p>a file is split into one or more blocks</p>
<ul>
<li>blocksize: 128M</li>
<li>150M æ‹†æˆ 2 ä¸ª block</li>
</ul>
</li>
<li>
<p>blocks are stored in a set of DataNodes</p>
<ul>
<li>ä¸ºä»€ä¹ˆï¼Ÿ å®¹é”™ï¼ï¼ï¼</li>
</ul>
</li>
<li>
<p>NameNode executes file system namespace operationsï¼šCRUD</p>
</li>
<li>
<p>determines the mapping of blocks to DataNodes</p>
<ul>
<li>
<p>a.txt 150M blocksize=128M</p>
</li>
<li>
<p>a.txt æ‹†åˆ†æˆ 2 ä¸ª block ä¸€ä¸ªæ˜¯ block1ï¼š128M å¦ä¸€ä¸ªæ˜¯ block2ï¼š22M<br>
block1 å­˜æ”¾åœ¨å“ªä¸ª DNï¼Ÿblock2 å­˜æ”¾åœ¨å“ªä¸ª DNï¼Ÿ</p>
</li>
<li>
<p>a.txt<br>
_ block1ï¼š128M, 192.168.199.1<br>
_ block2ï¼š22M, 192.168.199.2<br>
_ get a.txt<br>
_ è¿™ä¸ªè¿‡ç¨‹å¯¹äºç”¨æˆ·æ¥è¯´æ˜¯ä¸æ„ŸçŸ¥çš„</p>
</li>
</ul>
</li>
<li>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼š1 ä¸ª Node éƒ¨ç½²ä¸€ä¸ªç»„ä»¶</p>
</li>
</ol>
<h2 id="è¯¾ç¨‹ç¯å¢ƒä»‹ç»">è¯¾ç¨‹ç¯å¢ƒä»‹ç»ï¼š</h2>
<h3 id="æœ¬è¯¾ç¨‹å½•åˆ¶çš„ç³»ç»Ÿæ˜¯-macæ‰€ä»¥æˆ‘é‡‡ç”¨çš„-linux-å®¢æˆ·ç«¯æ˜¯-mac-è‡ªå¸¦çš„-shell">æœ¬è¯¾ç¨‹å½•åˆ¶çš„ç³»ç»Ÿæ˜¯ Macï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨çš„ linux å®¢æˆ·ç«¯æ˜¯ mac è‡ªå¸¦çš„ shell</h3>
<ul>
<li>å¦‚æœä½ ä»¬æ˜¯ winï¼šxshellã€crt</li>
<li>æœåŠ¡å™¨/linux åœ°å€ï¼š192.168.199.233</li>
<li>è¿æ¥åˆ° linux ç¯å¢ƒ<br>
_ ç™»é™†ï¼šssh hadoop@192.168.199.233<br>
_ ç™»é™†æˆåŠŸä»¥åï¼š[hadoop@hadoop000 ~]$
<ul>
<li>linuxæœºå™¨ï¼šç”¨æˆ·åhadoopã€å¯†ç 123456ã€hostnameæ˜¯* * hadoop000</li>
<li>åˆ›å»ºè¯¾ç¨‹ä¸­æ‰€éœ€è¦çš„ç›®å½•ï¼ˆåˆé€‚çš„æ–‡ä»¶å­˜æ”¾åœ¨åˆé€‚çš„ç›®å½•ï¼‰
<ol>
<li>[hadoop@hadoop000 ~]$ mkdir software å­˜æ”¾è¯¾ç¨‹æ‰€ä½¿ç”¨çš„è½¯ä»¶å®‰è£…åŒ… 2. [hadoop@hadoop000 ~]$ mkdir app       å­˜æ”¾è¯¾ç¨‹æ‰€æœ‰è½¯ä»¶çš„å®‰è£…ç›®å½•</li>
<li>[hadoop@hadoop000 ~]$ mkdir data å­˜æ”¾è¯¾ç¨‹ä¸­ä½¿ç”¨çš„æ•°æ® 4. [hadoop@hadoop000 ~]$ mkdir lib       å­˜æ”¾è¯¾ç¨‹ä¸­å¼€å‘è¿‡çš„ä½œä¸šjarå­˜æ”¾çš„ç›®å½•</li>
<li>[hadoop@hadoop000 ~]$ mkdir shell å­˜æ”¾è¯¾ç¨‹ä¸­ç›¸å…³çš„è„šæœ¬ 6. [hadoop@hadoop000 ~]$ mkdir maven_resp å­˜æ”¾è¯¾ç¨‹ä¸­ä½¿ç”¨åˆ°çš„ maven ä¾èµ–åŒ…å­˜æ”¾çš„ç›®å½•</li>
</ol>
</li>
</ul>
</li>
<li>å­¦å‘˜é—®ï¼šroot å¯†ç  1. åˆ‡æ¢ hadoop åˆ° root ç”¨æˆ·ï¼š[hadoop@hadoop000 ~]$ sudo -i 2. åˆ‡æ¢ root åˆ° hadoop ç”¨æˆ·ï¼š[root@hadoop000 ~]# su hadoop 3. æˆ‘ OOTB ç¯å¢ƒä¸­åˆ›å»ºçš„ hadoop ç”¨æˆ·æ˜¯æœ‰ sudo æƒé™ï¼šsudo vi /etc/hosts</li>
<li>Linux ç‰ˆæœ¬ï¼š * ä»¥å‰çš„è¯¾ç¨‹æ˜¯ centos6.4ï¼Œæœ¬æ¬¡è¯¾ç¨‹å‡çº§æˆ centos7</li>
</ul>
<h3 id="hadoop-ç¯å¢ƒæ­å»º">Hadoop ç¯å¢ƒæ­å»º</h3>
<ul>
<li>ä½¿ç”¨çš„ Hadoop ç›¸å…³ç‰ˆæœ¬ï¼šCDH</li>
<li>CDH ç›¸å…³è½¯ä»¶åŒ…ä¸‹è½½åœ°å€ï¼šhttp://archive.cloudera.com/cdh5/cdh/5/</li>
<li>Hadoop ä½¿ç”¨ç‰ˆæœ¬ï¼šhadoop-2.6.0-cdh5.15.1</li>
<li>Hadoop ä¸‹è½½ï¼šwget http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.6.0-cdh5.15.1.tar.gz</li>
<li>Hive ä½¿ç”¨ç‰ˆæœ¬ï¼šhive-1.1.0-cdh5.15.1</li>
</ul>
<h3 id="hadoophivespark-ç›¸å…³æ¡†æ¶çš„å­¦ä¹ ">Hadoop/Hive/Spark ç›¸å…³æ¡†æ¶çš„å­¦ä¹ ï¼š</h3>
<ul>
<li>
<p>ä½¿ç”¨å•æœºç‰ˆè¶³å¤Ÿ</p>
</li>
<li>
<p>å¦‚æœä½¿ç”¨é›†ç¾¤å­¦ä¹ ä¼šå¯¼è‡´ï¼šä»å…¥é—¨åˆ°æ”¾å¼ƒ</p>
</li>
<li>
<p>ä½¿ç”¨ Linux/Mac å­¦ä¹ </p>
</li>
<li>
<p>ä¸€å®šä¸è¦ä½¿ç”¨ Windows æ­å»º Hadoop ç¯å¢ƒ</p>
</li>
<li>
<p>æ‰€ä»¥ Linux åŸºç¡€æ˜¯è¦ä¼šçš„</p>
</li>
</ul>
<h3 id="hadoop-å®‰è£…å‰ç½®è¦æ±‚">Hadoop å®‰è£…å‰ç½®è¦æ±‚</h3>
<ul>
<li>Java 1.8+</li>
<li>ssh</li>
</ul>
<h3 id="å®‰è£…-java">å®‰è£… Java</h3>
<ul>
<li>æ‹·è´æœ¬åœ°è½¯ä»¶åŒ…åˆ°æœåŠ¡å™¨ï¼šscp jdk-8u91-linux-x64.tar.gz hadoop@192.168.199.233:~/software/</li>
<li>è§£å‹ jdk åˆ°~/app/ï¼štar -zvxf jdk-8u91-linux-x64.tar.gz -C ~/app/</li>
<li>æŠŠ jdk é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼š ~/.bash_profile - export JAVA_HOME=/home/hadoop/app/jdk1.8.0_91 - export PATH=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi><mi>A</mi><mi>V</mi><msub><mi>A</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>i</mi><mi>n</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">JAVA_HOME/bin:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>PATH</li>
<li>ä½¿å¾—é…ç½®ä¿®æ”¹ç”Ÿæ•ˆï¼šsource .bash_profile</li>
<li>éªŒè¯ï¼šjava -version</li>
</ul>
<h3 id="å®‰è£…-ssh-æ— å¯†ç ç™»é™†">å®‰è£… ssh æ— å¯†ç ç™»é™†</h3>
<ul>
<li>
<p>ls</p>
</li>
<li>
<p>ls -a</p>
</li>
<li>
<p>ls -la å¹¶æ²¡æœ‰å‘ç°ä¸€ä¸ª.ssh çš„æ–‡ä»¶å¤¹</p>
</li>
<li>
<p>ssh-keygen -t rsa ä¸€è·¯å›è½¦</p>
</li>
<li>
<p>cd ~/.ssh</p>
</li>
<li>
<p>[hadoop@hadoop000 .ssh]$ ll</p>
</li>
<li>
<p>æ€»ç”¨é‡ 12</p>
<pre><code class="language-shell">-rw------- 1 hadoop hadoop 1679 10æœˆ 15 02:54 id_rsa  ç§é’¥
-rw-r--r-- 1 hadoop hadoop  398 10æœˆ 15 02:54 id_rsa.pub å…¬é’¥
-rw-r--r-- 1 hadoop hadoop  358 10æœˆ 15 02:54 known_hosts
cat id_rsa.pub &gt;&gt; authorized_keys
chmod 600 authorized_keys
</code></pre>
</li>
</ul>
<h3 id="hadoophdfså®‰è£…">Hadoop(HDFS)å®‰è£…</h3>
<ul>
<li>
<p>ä¸‹è½½<br>
_ è§£å‹ï¼š~/app<br>
_ æ·»åŠ  HADOOP_HOME/bin åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡<br>
_ ä¿®æ”¹ Hadoop é…ç½®æ–‡ä»¶</p>
<pre><code class="language-shell"># hadoop-env.sh
export JAVA_HOME=/home/hadoop/app/jdk1.8.0_91
</code></pre>
<p>_ core-site.xml</p>
<pre><code class="language-xml">  &lt;property&gt;
      &lt;name&gt;fs.defaultFS&lt;/name&gt;
      &lt;value&gt;hdfs://hadoop000:8020&lt;/value&gt;
  &lt;/property&gt;

  hdfs-site.xml
  &lt;property&gt;
      &lt;name&gt;dfs.replication&lt;/name&gt;
      &lt;value&gt;1&lt;/value&gt;
  &lt;/property&gt;

  &lt;property&gt;
      &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
      &lt;value&gt;/home/hadoop/app/tmp&lt;/value&gt;
  &lt;/property&gt;
</code></pre>
<ul>
<li>slaves<br>
_ hadoop000<br>
_ å¯åŠ¨ HDFSï¼š<br>
_ ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ä¸€å®šè¦æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿï¼Œä¸è¦é‡å¤æ‰§è¡Œ: hdfs namenode -format<br>
_ å¯åŠ¨é›†ç¾¤ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>A</mi><mi>D</mi><mi>O</mi><mi>O</mi><msub><mi>P</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>b</mi><mi>i</mi><mi>n</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo>âˆ’</mo><mi>d</mi><mi>f</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mo>âˆ—</mo><mi mathvariant="normal">éªŒ</mi><mi mathvariant="normal">è¯</mi><mo>:</mo><mn>1.</mn><mo>[</mo><mi>h</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>o</mi><mi>p</mi><mi mathvariant="normal">@</mi><mi>h</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>o</mi><mi>p</mi><mn>000</mn><mi>s</mi><mi>b</mi><mi>i</mi><mi>n</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">HADOOP_HOME/sbin/start-dfs.sh
	* éªŒè¯:
		1. [hadoop@hadoop000 sbin]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">s</span><span class="mord">.</span><span class="mord mathdefault">s</span><span class="mord mathdefault">h</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord cjk_fallback">éªŒ</span><span class="mord cjk_fallback">è¯</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mopen">[</span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord">@</span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault">s</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span> jps 2. 60002 DataNode 3. 60171 SecondaryNameNode 4. 59870 NameNode 5. http://192.168.199.233:50070 6. å¦‚æœå‘ç° jps okï¼Œä½†æ˜¯æµè§ˆå™¨ä¸ OKï¼Ÿ åæœ‰å…«ä¹æ˜¯é˜²ç«å¢™é—®é¢˜ 7. æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼šsudo firewall-cmd --state 8. å…³é—­é˜²ç«å¢™: sudo systemctl stop firewalld.service 9. è¿›åˆ¶é˜²ç«å¢™å¼€æœºå¯åŠ¨ï¼š</li>
</ul>
</li>
</ul>
<h3 id="hadoop-è½¯ä»¶åŒ…å¸¸è§ç›®å½•è¯´æ˜">hadoop è½¯ä»¶åŒ…å¸¸è§ç›®å½•è¯´æ˜</h3>
<ul>
<li>binï¼šhadoop å®¢æˆ·ç«¯åå•</li>
<li>etc/hadoopï¼šhadoop ç›¸å…³çš„é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•</li>
<li>sbinï¼šå¯åŠ¨ hadoop ç›¸å…³è¿›ç¨‹çš„è„šæœ¬</li>
<li>shareï¼šå¸¸ç”¨ä¾‹å­</li>
</ul>
<h3 id="æ³¨æ„">æ³¨æ„ï¼š</h3>
<ul>
<li>
<p>start/stop-dfs.sh ä¸ hadoop-daemons.sh çš„å…³ç³»</p>
</li>
<li>
<p>start-dfs.sh</p>
<pre><code class="language-shell">hadoop-daemons.sh start namenode
hadoop-daemons.sh start datanode
hadoop-daemons.sh start secondarynamenode
</code></pre>
</li>
<li>
<p>stop-dfs.sh =</p>
</li>
<li>
<p>hadoop å¸¸ç”¨å‘½ä»¤ï¼š</p>
<ol>
<li>hadoop fs -ls /</li>
<li>hadoop fs -put</li>
<li>hadoop fs -copyFromLocal</li>
<li>hadoop fs -moveFromLocal</li>
<li>hadoop fs -cat</li>
<li>hadoop fs -text</li>
<li>hadoop fs -get</li>
<li>hadoop fs -mkdir</li>
<li>hadoop fs -mv ç§»åŠ¨/æ”¹å</li>
<li>hadoop fs -getmerge</li>
<li>hadoop fs -rm</li>
<li>hadoop fs -rmdir</li>
<li>hadoop fs -rm -r</li>
</ol>
</li>
</ul>
<h3 id="hdfs-å­˜å‚¨æ‰©å±•">HDFS å­˜å‚¨æ‰©å±•ï¼š</h3>
<ul>
<li>put: 1file ==&gt; 1...n block ==&gt; å­˜æ”¾åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šçš„</li>
<li>get: å» nn ä¸ŠæŸ¥æ‰¾è¿™ä¸ª file å¯¹åº”çš„å…ƒæ•°æ®ä¿¡æ¯</li>
<li>äº†è§£åº•å±‚çš„å­˜å‚¨æœºåˆ¶è¿™æ‰æ˜¯æˆ‘ä»¬çœŸæ­£è¦å­¦ä¹ çš„ä¸œè¥¿ï¼ŒæŒæ¡ API é‚£æ˜¯æ¯›æ¯›é›¨</li>
</ul>
<h3 id="ä½¿ç”¨-hdfs-api-çš„æ–¹å¼æ¥æ“ä½œ-hdfs-æ–‡ä»¶ç³»ç»Ÿ">ä½¿ç”¨ HDFS API çš„æ–¹å¼æ¥æ“ä½œ HDFS æ–‡ä»¶ç³»ç»Ÿ</h3>
<ul>
<li>IDEA/Eclipse</li>
<li>Java
<ul>
<li>ä½¿ç”¨ Maven æ¥ç®¡ç†é¡¹ç›®</li>
<li>æ‹·è´ jar åŒ…</li>
<li>æˆ‘çš„æ‰€æœ‰è¯¾ç¨‹éƒ½æ˜¯ä½¿ç”¨ maven æ¥è¿›è¡Œç®¡ç†çš„</li>
</ul>
</li>
</ul>
<pre><code class="language-shell">Caused by: org.apache.hadoop.ipc.RemoteException
(org.apache.hadoop.security.AccessControlException):
Permission denied: user=rocky, access=WRITE,
inode=&quot;/&quot;:hadoop:supergroup:drwxr-xr-x
</code></pre>
<h3 id="hdfs-æ“ä½œshell-java-api">HDFS æ“ä½œï¼šshell + Java API</h3>
<ul>
<li>ç»¼åˆæ€§çš„ HDFS å®æˆ˜ï¼šä½¿ç”¨ HDFS Java API æ‰å®Œæˆ HDFS æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶çš„è¯é¢‘ç»Ÿè®¡</li>
<li>è¯é¢‘ç»Ÿè®¡ï¼šwordcount
<ul>
<li>/path/1.txt</li>
<li>hello world hello</li>
<li>/path/2.txt</li>
<li>hello world hello
<ul>
<li>==&gt; (hello,4) (world,2)</li>
</ul>
</li>
</ul>
</li>
<li>å°†ç»Ÿè®¡å®Œçš„ç»“æœè¾“å‡ºåˆ° HDFS ä¸Šå»ã€‚</li>
</ul>
<h3 id="å‡è®¾æœ‰çš„å°ä¼™ä¼´äº†è§£è¿‡-mr-spark-ç­‰ç­‰è§‰å¾—è¿™ä¸ªæ“ä½œå¾ˆç®€å•">å‡è®¾ï¼šæœ‰çš„å°ä¼™ä¼´äº†è§£è¿‡ mrã€spark ç­‰ç­‰ï¼Œè§‰å¾—è¿™ä¸ªæ“ä½œå¾ˆç®€å•</h3>
<h3 id="æœ¬å®æˆ˜çš„è¦æ±‚åªå…è®¸ä½¿ç”¨-hdfs-api-è¿›è¡Œæ“ä½œ">æœ¬å®æˆ˜çš„è¦æ±‚ï¼šåªå…è®¸ä½¿ç”¨ HDFS API è¿›è¡Œæ“ä½œ</h3>
<h3 id="ç›®çš„">ç›®çš„</h3>
<ol>
<li>æŒæ¡ HDFS API çš„æ“ä½œ</li>
<li>é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œè®©ä½ ä»¬å¯¹äºåç»­è¦å­¦ä¹ çš„ mr æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è®¤è¯†</li>
</ol>
<h3 id="ç¡¬ç¼–ç -éå¸¸å¿Œè®³çš„">ç¡¬ç¼–ç  ï¼š éå¸¸å¿Œè®³çš„</h3>
<h3 id="å¯é…ç½®">==&gt; å¯é…ç½®</h3>
<h3 id="å¯æ’æ‹”çš„å¼€å‘ç®¡ç†æ–¹å¼-plugin">å¯æ’æ‹”çš„å¼€å‘/ç®¡ç†æ–¹å¼ plugin</h3>
<h3 id="å‰¯æœ¬æ‘†æ”¾ç­–ç•¥">å‰¯æœ¬æ‘†æ”¾ç­–ç•¥</h3>
<ul>
<li>
<p>1-æœ¬ rack çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>2-å¦å¤–ä¸€ä¸ª rack çš„èŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>3-ä¸ 2 ç›¸åŒçš„ rack çš„å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>1-æœ¬ rack çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>2-æœ¬ rack çš„å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
<li>
<p>3-ä¸åŒ rack çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</p>
</li>
</ul>
<h3 id="hdfs-çš„å…ƒæ•°æ®ç®¡ç†">HDFS çš„å…ƒæ•°æ®ç®¡ç†</h3>
<ul>
<li>å…ƒæ•°æ®ï¼šHDFS çš„ç›®å½•ç»“æ„ä»¥åŠæ¯ä¸ªæ–‡ä»¶çš„ BLOCK ä¿¡æ¯(idï¼Œå‰¯æœ¬ç³»æ•°ã€block å­˜æ”¾åœ¨å“ªä¸ª DN ä¸Š)</li>
<li>å­˜åœ¨ä»€ä¹ˆåœ°æ–¹ï¼šå¯¹åº”é…ç½® ${hadoop.tmp.dir}/name/......</li>
<li>å…ƒæ•°æ®å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼š</li>
</ul>
<pre><code class="language-shell">/test1
/test1/a.txt
/test2
/test2/1.txt
/test2/2.txt
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://zu3zz.github.io/tag/uge4gU_2X/" class="tag">
                    Hadoop
                  </a>
                
                  <a href="https://zu3zz.github.io/tag/yf0i5Glys/" class="tag">
                    Linux
                  </a>
                
                  <a href="https://zu3zz.github.io/tag/gIc76HpAW/" class="tag">
                    BigData
                  </a>
                
                  <a href="https://zu3zz.github.io/tag/egbOn_Rcj/" class="tag">
                    MapReduce
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://zu3zz.github.io/post/yarn-1/">
                  <h3 class="post-title">
                    Yarnç³»åˆ— ---- åŸºç¡€ã€ä»‹ç»ã€æµç¨‹
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
